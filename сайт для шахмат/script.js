const DEBUTS_DATABASE = {
    italian: {
        name: "–ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è –ø–∞—Ä—Ç–∏—è",
        moves: ["e4", "e5", "Nf3", "Nc6", "Bc4"],
        type: "–û—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–°—Ä–µ–¥–Ω—è—è",
        popularity: "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è",
        description: "–û–¥–∏–Ω –∏–∑ —Å—Ç–∞—Ä–µ–π—à–∏—Ö –∏ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–µ–±—é—Ç–æ–≤.",
        history: "–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –∏—Ç–∞–ª—å—è–Ω—Å–∫–∏–º–∏ —à–∞—Ö–º–∞—Ç–∏—Å—Ç–∞–º–∏ –≤ XVI –≤–µ–∫–µ.",
        ideas: `<ul><li>–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —Ñ–∏–≥—É—Ä</li><li>–ê—Ç–∞–∫–∞ –Ω–∞ f7</li></ul>`,
        variations: `<div class="variation"><strong>–ì–∞–º–±–∏—Ç –≠–≤–∞–Ω—Å–∞:</strong> 4.b4</div>`,
        famousGames: `<div class="game"><strong>–ê–Ω–¥–µ—Ä—Å–µ–Ω ‚Äì –î—é—Ñ—Ä–µ–Ω, 1852</strong></div>`,
        tips: `<ul><li>–°–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ, –ø–æ—Ç–æ–º –∞—Ç–∞–∫–∞</li></ul>`,
        videoId: "18441928943564092755",
        related: ["ruy_lopez", "scotch"]
    },

    sicilian: {
        name: "–°–∏—Ü–∏–ª–∏–∞–Ω—Å–∫–∞—è –∑–∞—â–∏—Ç–∞",
        moves: ["e4", "c5"],
        type: "–ü–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–í—ã—Å–æ–∫–∞—è",
        popularity: "–°–∞–º–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–∞—è",
        description: "–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ 1.e4 —Å –±–æ–≥–∞—Ç–æ–π —Ç–µ–æ—Ä–∏–µ–π.",
        history: "–ü–æ–ø—É–ª—è—Ä–Ω–∞ —Å XX –≤–µ–∫–∞.",
        ideas: `<ul><li>–ö–æ–Ω—Ç—Ä–∏–≥—Ä–∞</li><li>–ê—Å–∏–º–º–µ—Ç—Ä–∏—è</li></ul>`,
        variations: `<div class="variation"><strong>–î—Ä–∞–∫–æ–Ω:</strong> ...g6</div>`,
        famousGames: `<div class="game"><strong>–§–∏—à–µ—Ä ‚Äì –°–ø–∞—Å—Å–∫–∏–π</strong></div>`,
        tips: `<ul><li>–ò–∑—É—á–∞–π—Ç–µ –æ–¥–Ω—É —Å–∏—Å—Ç–µ–º—É –≥–ª—É–±–æ–∫–æ</li></ul>`,
        videoId: "18441928943564092756",
        related: ["caro_kann", "french"]
    },

    queens_gambit: {
        name: "–§–µ—Ä–∑–µ–≤—ã–π –≥–∞–º–±–∏—Ç",
        moves: ["d4", "d5", "c4"],
        type: "–ó–∞–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–°—Ä–µ–¥–Ω—è—è",
        popularity: "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è",
        description: "–ö–ª–∞—Å—Å–∏–∫–∞ —Å –±–æ—Ä—å–±–æ–π –∑–∞ —Ü–µ–Ω—Ç—Ä.",
        history: "–ò–∑–≤–µ—Å—Ç–µ–Ω —Å XV –≤–µ–∫–∞.",
        ideas: `<ul><li>–î–∞–≤–ª–µ–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä–µ</li></ul>`,
        variations: `<div class="variation"><strong>–ü—Ä–∏–Ω—è—Ç—ã–π:</strong> ...dxc4</div>`,
        famousGames: `<div class="game"><strong>–ö–∞–ø–∞–±–ª–∞–Ω–∫–∞ ‚Äì –ê–ª–µ—Ö–∏–Ω</strong></div>`,
        tips: `<ul><li>–ù–µ —Ç–æ—Ä–æ–ø–∏—Ç–µ—Å—å —Å –∞—Ç–∞–∫–æ–π</li></ul>`,
        videoId: "18441928943564092757",
        related: ["nimzo_indian"]
    },

    caro_kann: {
        name: "–ó–∞—â–∏—Ç–∞ –ö–∞—Ä–æ-–ö–∞–Ω–Ω",
        moves: ["e4", "c6"],
        type: "–ü–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–°—Ä–µ–¥–Ω—è—è",
        popularity: "–í—ã—Å–æ–∫–∞—è",
        description: "–ù–∞–¥—ë–∂–Ω–∞—è –∑–∞—â–∏—Ç–∞ –ø—Ä–æ—Ç–∏–≤ 1.e4.",
        history: "XIX –≤–µ–∫.",
        ideas: `<ul><li>–ü—Ä–æ—á–Ω–∞—è –ø–µ—à–µ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞</li></ul>`,
        variations: `<div class="variation"><strong>–ö–ª–∞—Å—Å–∏–∫–∞:</strong> d5</div>`,
        famousGames: `<div class="game"><strong>–ö–∞—Ä–ª—Å–µ–Ω ‚Äì –ù–µ–ø–æ–º–Ω—è—â–∏–π</strong></div>`,
        tips: `<ul><li>–†–∞–∑–≤–∏–≤–∞–π—Ç–µ —Å–ª–æ–Ω–∞</li></ul>`,
        videoId: "18441928943564092758",
        related: ["sicilian", "french"]
    },

    scandinavian: {
        name: "–°–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–∞—è –∑–∞—â–∏—Ç–∞",
        moves: ["e4", "d5"],
        type: "–ü–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–õ—ë–≥–∫–∞—è",
        popularity: "–°—Ä–µ–¥–Ω—è—è",
        description: "–ü—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π –¥–µ–±—é—Ç.",
        history: "XIX –≤–µ–∫.",
        ideas: `<ul><li>–†–∞–Ω–Ω–µ–µ –≤—Å–∫—Ä—ã—Ç–∏–µ —Ü–µ–Ω—Ç—Ä–∞</li></ul>`,
        variations: `<div class="variation"><strong>–ì–ª–∞–≤–Ω–∞—è:</strong> exd5</div>`,
        famousGames: `<div class="game"><strong>–ö–∞—Å–ø–∞—Ä–æ–≤ ‚Äì –¢–æ–ø–∞–ª–æ–≤</strong></div>`,
        tips: `<ul><li>–ù–µ –±–æ–π—Ç–µ—Å—å —Ä–∞–∑–º–µ–Ω–∞ –¥–∞–º</li></ul>`,
        videoId: "18441928943564092759",
        related: ["caro_kann"]
    },

    english: {
        name: "–ê–Ω–≥–ª–∏–π—Å–∫–æ–µ –Ω–∞—á–∞–ª–æ",
        moves: ["c4"],
        type: "–§–ª–∞–Ω–≥–æ–≤—ã–π –¥–µ–±—é—Ç",
        difficulty: "–°—Ä–µ–¥–Ω—è—è",
        popularity: "–í—ã—Å–æ–∫–∞—è",
        description: "–ì–∏–±–∫–æ–µ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∞–ª–æ.",
        history: "XIX –≤–µ–∫.",
        ideas: `<ul><li>–ö–æ–Ω—Ç—Ä–æ–ª—å —Ü–µ–Ω—Ç—Ä–∞ —Å —Ñ–ª–∞–Ω–≥–∞</li></ul>`,
        variations: `<div class="variation"><strong>–°–∏–º–º–µ—Ç—Ä–∏—è:</strong> ...c5</div>`,
        famousGames: `<div class="game"><strong>–ö–∞—Å–ø–∞—Ä–æ–≤ ‚Äì –ö–∞—Ä–ø–æ–≤</strong></div>`,
        tips: `<ul><li>–ò–≥—Ä–∞–π—Ç–µ –≥–∏–±–∫–æ</li></ul>`,
        videoId: "18441928943564092760",
        related: ["queens_gambit"]
    },

    birds: {
        name: "–î–µ–±—é—Ç –ë–µ—Ä–¥–∞",
        moves: ["f4"],
        type: "–§–ª–∞–Ω–≥–æ–≤—ã–π –¥–µ–±—é—Ç",
        difficulty: "–°—Ä–µ–¥–Ω—è—è",
        popularity: "–°—Ä–µ–¥–Ω—è—è",
        description: "–†–µ–¥–∫–∏–π –∏ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –¥–µ–±—é—Ç.",
        history: "–ì–µ–Ω—Ä–∏ –ë—ë—Ä–¥.",
        ideas: `<ul><li>–ê—Ç–∞–∫–∞ –∫–æ—Ä–æ–ª—è</li></ul>`,
        variations: `<div class="variation"><strong>–ü—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è–Ω–∏–µ:</strong> ...d5</div>`,
        famousGames: `<div class="game"><strong>–ë—ë—Ä–¥ ‚Äì –ì—É–Ω—Å–±–µ—Ä–≥</strong></div>`,
        tips: `<ul><li>–°–ª–æ–Ω –Ω–∞ g2</li></ul>`,
        videoId: "18441928943564092761",
        related: ["dutch"]
    },

    ruy_lopez: {
        name: "–ò—Å–ø–∞–Ω—Å–∫–∞—è –ø–∞—Ä—Ç–∏—è",
        moves: ["e4", "e5", "Nf3", "Nc6", "Bb5"],
        type: "–û—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–í—ã—Å–æ–∫–∞—è",
        popularity: "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è",
        description: "–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –≥–ª—É–±–æ–∫–∏—Ö –¥–µ–±—é—Ç–æ–≤.",
        history: "1561 –≥–æ–¥.",
        ideas: `<ul><li>–î–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ c6</li></ul>`,
        variations: `<div class="variation"><strong>–ó–∞–∫—Ä—ã—Ç–∞—è:</strong> ...a6</div>`,
        famousGames: `<div class="game"><strong>–§–∏—à–µ—Ä ‚Äì –°–ø–∞—Å—Å–∫–∏–π</strong></div>`,
        tips: `<ul><li>–¢–µ—Ä–ø–µ–Ω–∏–µ</li></ul>`,
        videoId: "18441928943564092762",
        related: ["italian"]
    },

    french: {
        name: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∞—è –∑–∞—â–∏—Ç–∞",
        moves: ["e4", "e6"],
        type: "–ü–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–°—Ä–µ–¥–Ω—è—è",
        popularity: "–í—ã—Å–æ–∫–∞—è",
        description: "–ó–∞–∫—Ä—ã—Ç—ã–π —Ü–µ–Ω—Ç—Ä –∏ –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∞.",
        history: "XIX –≤–µ–∫.",
        ideas: `<ul><li>–ü–æ–¥—Ä—ã–≤ d4</li></ul>`,
        variations: `<div class="variation"><strong>–í–∏–Ω—å—è:</strong> Nc3</div>`,
        famousGames: `<div class="game"><strong>–ö–æ—Ä—á–Ω–æ–π ‚Äì –ö–∞—Ä–ø–æ–≤</strong></div>`,
        tips: `<ul><li>–ê–∫—Ç–∏–≤–∏–∑–∏—Ä—É–π—Ç–µ —Ñ–∏–≥—É—Ä—ã</li></ul>`,
        videoId: "18441928943564092763",
        related: ["caro_kann"]
    },


    nimzo_indian: {
        name: "–ó–∞—â–∏—Ç–∞ –ù–∏–º—Ü–æ–≤–∏—á–∞",
        moves: ["d4", "Nf6", "c4", "e6", "Nc3", "Bb4"],
        type: "–ó–∞–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–í—ã—Å–æ–∫–∞—è",
        popularity: "–í—ã—Å–æ–∫–∞—è",
        description: "–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –≥–ª—É–±–æ–∫–∏—Ö –¥–µ–±—é—Ç–æ–≤.",
        history: "–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –ê—Ä–æ–Ω–æ–º –ù–∏–º—Ü–æ–≤–∏—á–µ–º –≤ 1920-—Ö –≥–æ–¥–∞—Ö.",
        ideas: `<ul><li>–î–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ü–µ–Ω—Ç—Ä —Ñ–∏–≥—É—Ä–∞–º–∏</li><li>–°–≤—è–∑–∫–∞ –∫–æ–Ω—è c3</li><li>–ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ e4</li></ul>`,
        variations: `<div class="variation"><strong>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π:</strong> 4.e3</div><div class="variation"><strong>–ó–µ–º–∏—à–∞:</strong> 4.a3</div>`,
        famousGames: `<div class="game"><strong>–ê–ª–µ—Ö–∏–Ω ‚Äì –ù–∏–º—Ü–æ–≤–∏—á, 1930</strong></div><div class="game"><strong>–ö–∞—Å–ø–∞—Ä–æ–≤ ‚Äì –ö–∞—Ä–ø–æ–≤, 1985</strong></div>`,
        tips: `<ul><li>–ù–µ –º–µ–Ω—è–π—Ç–µ —Å–ª–æ–Ω–∞ –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã</li><li>–ò—â–∏—Ç–µ –∫–æ–Ω—Ç—Ä–∏–≥—Ä—É –Ω–∞ —Ñ–µ—Ä–∑–µ–≤–æ–º —Ñ–ª–∞–Ω–≥–µ</li></ul>`,
        videoId: "18441928943564092762",
        related: ["queens_gambit", "bogo_indian"]
    },

    dutch: {
        name: "–ì–æ–ª–ª–∞–Ω–¥—Å–∫–∞—è –∑–∞—â–∏—Ç–∞",
        moves: ["d4", "f5"],
        type: "–ü–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–í—ã—Å–æ–∫–∞—è",
        popularity: "–°—Ä–µ–¥–Ω—è—è",
        description: "–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –¥–µ–±—é—Ç —Å –∞—Ç–∞–∫–æ–π –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å–∫–æ–º —Ñ–ª–∞–Ω–≥–µ.",
        history: "–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤ XIX –≤–µ–∫–µ.",
        ideas: `<ul><li>–ê—Ç–∞–∫–∞ –∫–æ—Ä–æ–ª—è</li><li>–ö–æ–Ω—Ç—Ä–æ–ª—å e4</li></ul>`,
        variations: `<div class="variation"><strong>–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è:</strong> ...g6</div><div class="variation"><strong>–ö–∞–º–µ–Ω–Ω–∞—è —Å—Ç–µ–Ω–∞:</strong> ...d5</div>`,
        famousGames: `<div class="game"><strong>–ë–æ—Ç–≤–∏–Ω–Ω–∏–∫ ‚Äì –ö–µ—Ä–µ—Å, 1948</strong></div><div class="game"><strong>–ö–æ—Ä—á–Ω–æ–π ‚Äì –ö–∞—Ä–ø–æ–≤, 1978</strong></div>`,
        tips: `<ul><li>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ—Å–ª–∞–±–ª–µ–Ω–Ω—ã–º –∫–æ—Ä–æ–ª—ë–º</li><li>–ê—Ç–∞–∫—É–π—Ç–µ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å–∫–æ–º —Ñ–ª–∞–Ω–≥–µ</li></ul>`,
        videoId: "18441928943564092764",
        related: ["birds"]
    },
    alekhine: {
        name: "–ó–∞—â–∏—Ç–∞ –ê–ª–µ—Ö–∏–Ω–∞",
        moves: ["1.e4", "Nf6"],
        type: "–ü–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–í—ã—Å–æ–∫–∞—è",
        popularity: "–°—Ä–µ–¥–Ω—è—è",
        description: "–ì–∏–ø–µ—Ä–º–æ–¥–µ—Ä–Ω–∏—Å—Ç—Å–∫–∏–π –¥–µ–±—é—Ç: —á–µ—Ä–Ω—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –±–µ–ª—ã–º –∑–∞–Ω—è—Ç—å —Ü–µ–Ω—Ç—Ä –ø–µ—à–∫–∞–º–∏, —á—Ç–æ–±—ã –ø–æ–∑–∂–µ –∏—Ö –∞—Ç–∞–∫–æ–≤–∞—Ç—å.",
        history: "–í–≤–µ–¥–µ–Ω –≤ —à–∏—Ä–æ–∫—É—é –ø—Ä–∞–∫—Ç–∏–∫—É –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–º –ê–ª–µ—Ö–∏–Ω—ã–º –≤ 1921 –≥–æ–¥—É.",
        ideas: "<ul><li>–ü—Ä–æ–≤–æ–∫–∞—Ü–∏—è –ø–µ—à–µ—á–Ω–æ–≥–æ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏—è –±–µ–ª—ã—Ö</li><li>–ü–æ–¥—Ä—ã–≤ —Ü–µ–Ω—Ç—Ä–∞ —Ö–æ–¥–∞–º–∏ d6 –∏ c5</li><li>–§–∏–≥—É—Ä–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–µ—à–∫—É e4</li></ul>",
        variations: "<div class='variation'><strong>–†–∞–∑–º–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:</strong> 3.d4 d6 4.c4</div><div class='variation'><strong>–ê—Ç–∞–∫–∞ —á–µ—Ç—ã—Ä–µ—Ö –ø–µ—à–µ–∫:</strong> 3.d4 d6 4.c4 Nb6 5.f4</div>",
        famousGames: "<div class='game'><strong>–°–ø–∞—Å—Å–∫–∏–π ‚Äì –§–∏—à–µ—Ä, 1972</strong></div><div class='game'><strong>–ê–ª–µ—Ö–∏–Ω ‚Äì –ú–∏–∫–µ–Ω–∞—Å, 1937</strong></div>",
        tips: "<ul><li>–ù–µ –±–æ–π—Ç–µ—Å—å –æ—Ç—Å—Ç—É–ø–∞—Ç—å –∫–æ–Ω–µ–º</li><li>–°–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥—Ä—ã–≤–∞–π—Ç–µ —Ü–µ–Ω—Ç—Ä</li><li>–û—Å—Ç–µ—Ä–µ–≥–∞–π—Ç–µ—Å—å –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</li></ul>",
        videoId: "18441928943564092764",
        related: ["kings-pawn", "scandinavian"]
    },
    kings_indian: {
        name: "–°—Ç–∞—Ä–æ–∏–Ω–¥–∏–π—Å–∫–∞—è –∑–∞—â–∏—Ç–∞",
        moves: ["1.d4", "Nf6", "2.c4", "g6", "3.Nc3", "Bg7"],
        type: "–ó–∞–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è",
        popularity: "–í—ã—Å–æ–∫–∞—è",
        description: "–ì–∏–ø–µ—Ä–º–æ–¥–µ—Ä–Ω–∏—Å—Ç—Å–∫–∞—è –∑–∞—â–∏—Ç–∞, –≥–¥–µ —á–µ—Ä–Ω—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –±–µ–ª—ã–º –∑–∞—Ö–≤–∞—Ç–∏—Ç—å —Ü–µ–Ω—Ç—Ä, —á—Ç–æ–±—ã –ø–æ–∑–∂–µ –Ω–∞–Ω–µ—Å—Ç–∏ —Å–æ–∫—Ä—É—à–∏—Ç–µ–ª—å–Ω—ã–π —É–¥–∞—Ä.",
        history: "–°—Ç–∞–ª–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –≤ 1940-—Ö –≥–æ–¥–∞—Ö –±–ª–∞–≥–æ–¥–∞—Ä—è —É—Å–∏–ª–∏—è–º —Å–æ–≤–µ—Ç—Å–∫–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤: –ë—Ä–æ–Ω—à—Ç–µ–π–Ω–∞ –∏ –ë–æ–ª–µ—Å–ª–∞–≤—Å–∫–æ–≥–æ.",
        ideas: "<ul><li>–ê—Ç–∞–∫–∞ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å–∫–æ–º —Ñ–ª–∞–Ω–≥–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–æ–º —Ü–µ–Ω—Ç—Ä–µ</li><li>–§–∏–∞–Ω–∫–µ—Ç—Ç–æ —Å–ª–æ–Ω–∞ –Ω–∞ g7</li><li>–ü–æ–¥—Ä—ã–≤ —Ü–µ–Ω—Ç—Ä–∞ —Ö–æ–¥–∞–º–∏ e5 –∏–ª–∏ c5</li></ul>",
        variations: "<div class='variation'><strong>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:</strong> 4.e4 d6 5.Nf3 O-O 6.Be2 e5</div><div class='variation'><strong>–í–∞—Ä–∏–∞–Ω—Ç –ó–µ–º–∏—à–∞:</strong> 4.e4 d6 5.f3</div>",
        famousGames: "<div class='game'><strong>–ì–ª–∏–≥–æ—Ä–∏—á ‚Äì –§–∏—à–µ—Ä, 1970</strong></div><div class='game'><strong>–ö–∞—Å–ø–∞—Ä–æ–≤ ‚Äì –ü–∏–∫–µ—Ç, 1989</strong></div>",
        tips: "<ul><li>–ù–µ –±–æ–π—Ç–µ—Å—å –æ—Ç–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤ —Ü–µ–Ω—Ç—Ä–µ</li><li>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –º–æ—â—å—é —Å–≤–æ–µ–≥–æ ¬´—Å—Ç–∞—Ä–æ–∏–Ω–¥–∏–π—Å–∫–æ–≥–æ¬ª —Å–ª–æ–Ω–∞ g7</li></ul>",
        related: ["nimzo_indian"]
    },

    grunfeld: {
        name: "–ó–∞—â–∏—Ç–∞ –ì—Ä—é–Ω—Ñ–µ–ª—å–¥–∞",
        moves: ["1.d4", "Nf6", "2.c4", "g6", "3.Nc3", "d5"],
        type: "–ó–∞–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–í—ã—Å–æ–∫–∞—è",
        popularity: "–í—ã—Å–æ–∫–∞—è",
        description: "–ê–∫—Ç–∏–≤–Ω—ã–π –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–±—é—Ç, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –ø–æ–¥—Ä—ã–≤ –±–µ–ª–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞.",
        history: "–í–ø–µ—Ä–≤—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –≠—Ä–Ω—Å—Ç–æ–º –ì—Ä—é–Ω—Ñ–µ–ª—å–¥–æ–º –≤ 1922 –≥–æ–¥—É –ø—Ä–æ—Ç–∏–≤ –ê–ª—å–±–µ—Ä—Ç–∞ –ë–µ–∫–∫–µ—Ä–∞.",
        ideas: "<ul><li>–ö–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∞ —Ü–µ–Ω—Ç—Ä–∞ d4 —Ñ–∏–≥—É—Ä–∞–º–∏</li><li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–≤–ª–µ–Ω–∏—è –ø–æ –±–æ–ª—å—à–æ–π –¥–∏–∞–≥–æ–Ω–∞–ª–∏</li><li>–ñ–µ—Ä—Ç–≤–∞ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ —Ä–∞–¥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</li></ul>",
        variations: "<div class='variation'><strong>–†–∞–∑–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:</strong> 4.cxd5 Nxd5 5.e4</div><div class='variation'><strong>–°–∏—Å—Ç–µ–º–∞ —Å Bf4:</strong> 4.Nf3 Bg7 5.Bf4</div>",
        famousGames: "<div class='game'><strong>–î–æ–Ω–∞–ª—å–¥ –ë–∏—Ä–Ω ‚Äì –†–æ–±–µ—Ä—Ç –§–∏—à–µ—Ä, 1956 (¬´–ü–∞—Ä—Ç–∏—è –≤–µ–∫–∞¬ª)</strong></div>",
        tips: "<ul><li>–¢—â–∞—Ç–µ–ª—å–Ω–æ —É—á–∏—Ç–µ —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã</li><li>–ù–µ –ø–æ–∑–≤–æ–ª—è–π—Ç–µ –±–µ–ª—ã–º —É–∫—Ä–µ–ø–∏—Ç—å —Ü–µ–Ω—Ç—Ä –±–µ–∑–Ω–∞–∫–∞–∑–∞–Ω–Ω–æ</li></ul>",
        related: ["kings_indian"]
    },

    vienna: {
        name: "–í–µ–Ω—Å–∫–∞—è –ø–∞—Ä—Ç–∏—è",
        moves: ["1.e4", "e5", "2.Nc3"],
        type: "–û—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–°—Ä–µ–¥–Ω—è—è",
        popularity: "–°—Ä–µ–¥–Ω—è—è",
        description: "–ö—Ä–µ–ø–∫–∏–π –¥–µ–±—é—Ç, –∫–æ—Ç–æ—Ä—ã–π —á–∞—Å—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –∞—Ç–∞–∫–∏, –Ω–∞–ø–æ–¥–æ–±–∏–µ –ö–æ—Ä–æ–ª–µ–≤—Å–∫–æ–≥–æ –≥–∞–º–±–∏—Ç–∞.",
        history: "–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ XIX –≤–µ–∫–∞ –ö–∞—Ä–ª–æ–º –•–∞–º–ø–µ –≤ –≤–µ–Ω—Å–∫–∏—Ö –∫–æ—Ñ–µ–π–Ω—è—Ö.",
        ideas: "<ul><li>–†–∞–∑–≤–∏—Ç–∏–µ –∫–æ–Ω—è –Ω–∞ c3 –ø–µ—Ä–µ–¥ f4</li><li>–ö–æ–Ω—Ç—Ä–æ–ª—å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π</li><li>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–π –∞—Ç–∞–∫–∏ –Ω–∞ f7</li></ul>",
        variations: "<div class='variation'><strong>–ì–∞–º–±–∏—Ç –•–∞–º–ø–µ-–ú—É—Ü–∏–æ:</strong> 2.Nc3 Nc6 3.f4 exf4 4.Nf3 g5 5.Bc4 g4 6.O-O</div>",
        famousGames: "<div class='game'><strong>–°—Ç–µ–π–Ω–∏—Ü ‚Äì –ë–ª—ç–∫–±–µ—Ä–Ω, 1876</strong></div>",
        tips: "<ul><li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏ (—Ä–µ–¥–∫–∏–π —Ö–æ–¥ –Ω–∞ —Ç–æ–ø-—É—Ä–æ–≤–Ω–µ)</li><li>–ë—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –≤ –∞—Ç–∞–∫—É</li></ul>",
        related: ["italian", "ruy_lopez"]
    },

    scotch: {
        name: "–®–æ—Ç–ª–∞–Ω–¥—Å–∫–∞—è –ø–∞—Ä—Ç–∏—è",
        moves: ["1.e4", "e5", "2.Nf3", "Nc6", "3.d4"],
        type: "–û—Ç–∫—Ä—ã—Ç—ã–π –¥–µ–±—é—Ç",
        difficulty: "–°—Ä–µ–¥–Ω—è—è",
        popularity: "–í—ã—Å–æ–∫–∞—è",
        description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –¥–µ–±—é—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –±–µ–ª—ã–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—Ç —Ü–µ–Ω—Ç—Ä, –≤—ã–Ω—É–∂–¥–∞—è —á–µ—Ä–Ω—ã—Ö –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ä–µ—à–µ–Ω–∏—è–º.",
        history: "–ü–æ–ª—É—á–∏–ª –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –º–∞—Ç—á–∞ –ø–æ –ø–µ—Ä–µ–ø–∏—Å–∫–µ –≠–¥–∏–Ω–±—É—Ä–≥ ‚Äî –õ–æ–Ω–¥–æ–Ω –≤ 1824 –≥–æ–¥—É. –û–≥—Ä–æ–º–Ω—ã–π –≤–∫–ª–∞–¥ –≤ —Ç–µ–æ—Ä–∏—é –≤–Ω–µ—Å –ì–∞—Ä—Ä–∏ –ö–∞—Å–ø–∞—Ä–æ–≤.",
        ideas: "<ul><li>–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞—Ö–≤–∞—Ç —Ü–µ–Ω—Ç—Ä–∞ –ø–µ—à–∫–æ–π d4</li><li>–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ª–∏–Ω–∏–π –¥–ª—è —Å–ª–æ–Ω–æ–≤</li><li>–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ–π, –¥–∏–Ω–∞–º–∏—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏</li></ul>",
        variations: "<div class='variation'><strong>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:</strong> 3...exd4 4.Nxd4 Bc5</div><div class='variation'><strong>–í–∞—Ä–∏–∞–Ω—Ç –®–º–∏–¥—Ç–∞:</strong> 3...exd4 4.Nxd4 Nf6</div><div class='variation'><strong>–®–æ—Ç–ª–∞–Ω–¥—Å–∫–∏–π –≥–∞–º–±–∏—Ç:</strong> 3...exd4 4.Bc4</div>",
        famousGames: "<div class='game'><strong>–ö–∞—Å–ø–∞—Ä–æ–≤ ‚Äì –ö–∞—Ä–ø–æ–≤, 1990 (–ú–∞—Ç—á –Ω–∞ –ø–µ—Ä–≤–µ–Ω—Å—Ç–≤–æ –º–∏—Ä–∞)</strong></div>",
        tips: "<ul><li>–ë–µ–ª—ã–º –≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É, —Ç–∞–∫ –∫–∞–∫ —Ü–µ–Ω—Ç—Ä –≤—Å–∫—Ä—ã—Ç</li><li>–ß–µ—Ä–Ω—ã–º –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ñ–∏–≥—É—Ä—ã, —á—Ç–æ–±—ã –Ω–µ –ø–æ–ø–∞—Å—Ç—å –ø–æ–¥ –∞—Ç–∞–∫—É</li></ul>",
        related: ["italian", "ruy_lopez"]
    }


}




let currentGame = null;
let currentBoard = null;
let currentMoveIndex = 0;
let currentMoves = [];
let isTrainingMode = false;
let currentDebutId = null;

document.addEventListener('DOMContentLoaded', function () {
    initEventListeners();
});

function initEventListeners() {
    document.querySelectorAll('.debute-card').forEach(card => {
        card.addEventListener('click', function () {
            const debutId = this.getAttribute('data-debute-id');
            loadDebut(debutId);
        });
    });


    document.getElementById('backToMapBtn').addEventListener('click', showDebutMap);


    document.getElementById('prevMoveBtn').addEventListener('click', prevMove);
    document.getElementById('nextMoveBtn').addEventListener('click', nextMove);
    document.getElementById('resetBtn').addEventListener('click', resetBoard);

    document.getElementById('trainBtn').addEventListener('click', startTraining);
    document.getElementById('stopTrainBtn').addEventListener('click', stopTraining);
}

function loadDebut(debutId) {
    currentDebutId = debutId;
    const debut = DEBUTS_DATABASE[debutId];

    if (!debut) {
        alert('–î–µ–±—é—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
    }
    document.getElementById('studyTitle').textContent = `–ò–∑—É—á–µ–Ω–∏–µ: ${debut.name}`;

    document.getElementById('debuteDescription').textContent = debut.description;
    document.getElementById('debuteHistory').textContent = debut.history;
    document.getElementById('debuteType').textContent = debut.type;
    document.getElementById('debuteDifficulty').textContent = debut.difficulty;
    document.getElementById('debutePopularity').textContent = debut.popularity;

    const movesDisplay = document.getElementById('debuteMoves');
    movesDisplay.textContent = debut.moves.join(' ');
    movesDisplay.innerHTML = formatMoves(debut.moves);

    document.getElementById('debuteIdeas').innerHTML = debut.ideas;
    document.getElementById('debuteVariations').innerHTML = debut.variations;
    document.getElementById('famousGames').innerHTML = debut.famousGames;
    document.getElementById('debuteTips').innerHTML = debut.tips;


    const videoContainer = document.getElementById('videoContainer');
    if (debut.videoId) {
        videoContainer.innerHTML = `
                    <div class="video-wrapper">
<iframe
  src="https://rutube.ru/play/embed/9e74db8e65c841cfe20790e945b2faa8"
  width="100%"
  height="315"
  frameborder="0"
  allowfullscreen>
</iframe>
  
                    </div>
                `;
    } else {
        videoContainer.innerHTML = '<p>–í–∏–¥–µ–æ—É—Ä–æ–∫ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω</p>';
    }


    document.getElementById('debuteMap').style.display = 'none';
    document.getElementById('studyArea').style.display = 'block';


    initChessBoard(debut.moves);


    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function formatMoves(moves) {
    let result = '';
    let moveNumber = 1;

    for (let i = 0; i < moves.length; i += 2) {
        result += `${moveNumber}. ${moves[i]}`;
        if (moves[i + 1]) {
            result += ` ${moves[i + 1]}`;
        }
        result += '<br>';
        moveNumber++;
    }

    return result;
}

function initChessBoard(moves) {

    if (currentBoard) {
        currentBoard.destroy();
    }


    currentBoard = Chessboard2('board', {
        position: 'start',
        draggable: true,
        moveSpeed: 'slow',
        sparePieces: false,
        onDrop: onDrop,
        orientation: 'white'
    });


    currentGame = new Chess();
    currentMoves = moves;
    currentMoveIndex = 0;


    document.getElementById('currentMove').textContent = '0';
    document.getElementById('totalMoves').textContent = moves.length;
}

function onDrop(source, target) {

    if (isTrainingMode) {
        const correctMove = currentMoves[currentMoveIndex];
        const move = currentGame.move({
            from: source,
            to: target,
            promotion: 'q'
        });

        if (move === null) return 'snapback';


        const moveNotation = move.san;
        const expectedMove = correctMove;

        if (moveNotation === expectedMove || move.from + move.to === expectedMove) {

            currentMoveIndex++;
            document.getElementById('currentMove').textContent = currentMoveIndex;

            if (currentMoveIndex >= currentMoves.length) {
                alert('üéâ –û—Ç–ª–∏—á–Ω–æ! –í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–ª–∏ –≤—Å–µ —Ö–æ–¥—ã –¥–µ–±—é—Ç–∞!');
                stopTraining();
            }
        } else {

            alert(`–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –û–∂–∏–¥–∞–ª—Å—è —Ö–æ–¥: ${expectedMove}`);
            currentGame.undo();
            currentBoard.position(currentGame.fen());
            return 'snapback';
        }
    } else {

        const move = currentGame.move({
            from: source,
            to: target,
            promotion: 'q'
        });

        if (move === null) return 'snapback';
    }

    currentBoard.position(currentGame.fen());
    return true;
}

function prevMove() {
    if (currentMoveIndex > 0) {
        currentGame.undo();
        currentMoveIndex--;
        currentBoard.position(currentGame.fen());
        document.getElementById('currentMove').textContent = currentMoveIndex;
    }
}

function nextMove() {
    if (currentMoveIndex < currentMoves.length) {
        const move = currentMoves[currentMoveIndex];
        currentGame.move(move);
        currentMoveIndex++;
        currentBoard.position(currentGame.fen());
        document.getElementById('currentMove').textContent = currentMoveIndex;
    }
}

function resetBoard() {
    currentGame.reset();
    currentMoveIndex = 0;
    currentBoard.position('start');
    document.getElementById('currentMove').textContent = '0';

    if (isTrainingMode) {
        stopTraining();
    }
}

function startTraining() {
    isTrainingMode = true;
    document.getElementById('trainingTip').style.display = 'block';
    document.getElementById('trainBtn').style.display = 'none';
    resetBoard();


    alert('–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ö–æ–¥—ã –¥–µ–±—é—Ç–∞. –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫—É.');
}

function stopTraining() {
    isTrainingMode = false;
    document.getElementById('trainingTip').style.display = 'none';
    document.getElementById('trainBtn').style.display = 'block';
}

function showDebutMap() {
    document.getElementById('studyArea').style.display = 'none';
    document.getElementById('debuteMap').style.display = 'block';


    if (isTrainingMode) {
        stopTraining();
    }
}